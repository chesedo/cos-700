\documentclass[a4paper,10pt]{article}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage[dvipsnames]{xcolor}

\makeatletter
\@ifpackageloaded{tex4ht}{%
  \usepackage[dvips]{graphicx}
}{%
\usepackage[pdftex]{graphicx}
}
\makeatother

\usepackage{listings}
\usepackage{lmodern}
\usepackage{mdframed}
\usepackage{url}

\usepackage{keyval}

\usepackage[plain]{fancyref}
\usepackage[breakable,minted,skins]{tcolorbox}

\DeclareGraphicsRule{*}{mps}{*}{}

\newenvironment{code}[3][ht]
 {\VerbatimEnvironment
  \begin{listing}[#1]
  \caption{#2}\label{lst:#3}
  \begin{minted}[
    breaklines,
    escapeinside=||,
    linenos,
    xleftmargin=21pt
    ]{rust}}
 {\end{minted}\end{listing}}

\newtcbinputlisting[auto counter]{\libraryCodeFromFile}[4][firstline=1,lastline=-1]{%
  listing engine=minted,
  minted language=rust,
  minted options={autogobble,linenos,breaklines,escapeinside=||,fontsize=\small,tabsize=2,firstnumber=1,#1},
  listing file={Code/Rust/#2},
  listing only,
  size=title,
  breakable,
  boxrule=0.5mm,
  colback=white,
  coltext=Black!95!,
  title=\small{Listing \thetcbcounter}: #4,
  label=lst:#3
}

\newtcbinputlisting{\clientCodeFromFile}[2][firstline=1,lastline=-1]{%
  listing engine=minted,
  minted language=rust,
  minted options={autogobble,breaklines,escapeinside=||,fontsize=\small,tabsize=2,firstnumber=1,#1},
  listing file={Code/Rust/#2},
  listing only,
  breakable,
  frame hidden,
  arc=0mm,
  left=5mm,
  colframe=white,
  boxrule=0mm,
  colback=white,
  coltext=black
}

\newtcbinputlisting[auto counter]{\exampleCodeFromFile}[4][firstline=1,lastline=-1]{%
  listing engine=minted,
  minted language=rust,
  minted options={autogobble,linenos,breaklines,escapeinside=||,fontsize=\small,tabsize=2,firstnumber=1,#1},
  listing file={Code/Rust/#2},
  listing only,
  size=title,
  breakable,
  boxrule=0.5mm,
  colback=white,
  coltext=Black!95!,
  title=\small{Listing \thetcbcounter}: #4,
  label=lst:#3
}

\newtcbox{\highlight}[1][red]{%
    on line,
    arc=0pt,
    outer arc=0pt,
    colback=#1!40!white,
    colframe=#1!50!white,
    boxsep=0pt,
    left=1pt,
    right=1pt,
    top=2pt,
    bottom=2pt,
    boxrule=0pt,
    bottomrule=1pt,
    toprule=1pt
}

\newcommand*{\fancyreflstlabelprefix}{lst}
\frefformat{plain}{\fancyreflstlabelprefix}{listing\fancyrefdefaultspacing#1}
\Frefformat{plain}{\fancyreflstlabelprefix}{Listing\fancyrefdefaultspacing#1}

\newmdenv[linecolor=BlueGreen,frametitle=Note,frametitlebackgroundcolor=BlueGreen!40!]{notebox}

\title
{
   \includegraphics[width=12cm]{up_logo.png} \\
   \vspace{2cm}
   \textbf{COS700 Research} \\ \vspace{0.5cm}
   \textbf{Design Pattern Metaprogramming Foundations in Rust\\ \large Abstract Factory and Visitor} \\ \vspace{0.5cm}
   \textbf{Student number:} u19239395 \\ \vspace{0.5cm}
   \textbf{Supervisor}: \\ Dr. Linda Marshall
}

\date{??? 2020}
\begin{document}
\author{}

\maketitle

\newpage
\linespread{1.25}

\section*{Abstract}

\section*{Keywords:}

\newpage

\section{Introduction}

\input{Sections/DesignPatterns.tex}
\input{Sections/Metaprogramming.tex}
\input{Sections/Rust.tex}

\section{Reporting}

\section{Conclusion}


\bibliographystyle{alpha}
\bibliography{References}

\end{document}